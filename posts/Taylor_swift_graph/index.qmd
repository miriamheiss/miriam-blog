---
title: "Taylor Swift Graph"
subtitle: "Energy and Key of the song"
author: "Miriam Heiss"
date: "2022-08-04"
categories: [project]
#image:  
format:
  html:
    code-fold: show
    code-tools: true
---

```{r, include = FALSE, message = FALSE}
library(spotifyr)
library(tidyverse)

ts_id <- "06HL4z0CvFAxyc27GXpf02"

taylor_swift_raw <- get_artist_albums(ts_id)
saveRDS(taylor_swift_raw, "ts_albums.rds")
ts_albums_raw <- readRDS("ts_albums.rds")

 ts_audio_raw <- get_artist_audio_features(ts_id)
 saveRDS(ts_audio_raw, "ts_audio.rds")
ts_audio_raw <- readRDS("ts_audio.rds")
```

## Getting the Data

First, I needed to get the data. I got it through the package [**spotifyr**](https://www.rdocumentation.org/packages/spotifyr/versions/2.1.1), which is a large data set of almost everything on spotify. When I first got it, it was very messy, so I sorted and cleaned up the data using functions like `slice`, and `filter`, and `select`. Next, I wanted to just get 9 albums from her, no karaoke or special remixes, like this: 

```{r intro}
taylor_swift_albums <- ts_albums_raw %>% 
  group_by(name) %>%  
  slice(1)

albums <- c("evermore (deluxe version)",
            "folklore (deluxe version)",
            "Lover",
            "reputation",
            "1989",
            "Red (Taylor's Version)",
            "Speak Now",
            "Fearless (Taylor's Version)",
            "Taylor Swift")

ts_audio_clean <- ts_audio_raw %>% 
  filter(album_name %in% albums) %>% 
  select(track_name, energy, key_name, album_name, duration_ms, time_signature)
```

## Plotting

Next, I started plotting. In the `scale_color_manual`, I tried to choose colors that reflected the album cover.

```{r plotting}
ts_graph<- ggplot(data = ts_audio_clean,
       mapping = aes(x = key_name,
                     y = energy,
                     color = album_name, 
                     text = track_name))+ 
  geom_point(size = 2.5)+ 
  scale_color_manual(values = c("deepskyblue2",
                                "lightsalmon4",
                                "goldenrod",
                                "seashell4",
                                "palevioletred1",
                                "darkred",
                                "grey20",
                                "orchid4",
                                "palegreen4"))+ 
  labs(title = "Energy by Key (Taylor Swift)",
       y = "Energy",
       x = "Key", 
       color = "Album")+ 
  annotate(geom = "label", x = "A#", y = 0, label = "Low")+ 
  annotate(geom = "label", x = "A#", y = 1, label = "High")+ 
  theme_linedraw()
```

I also added annotations, to make the graph easier to read.
